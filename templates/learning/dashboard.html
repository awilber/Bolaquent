{% extends "base.html" %}

{% block title %}Dashboard - Bolaquent{% endblock %}

{% block body_class %}hero-page hero-focus{% endblock %}

{% block content %}
<div class="hero-content-wrapper">
    <div style="position: relative; z-index: 2; padding: 2rem; width: 100%; max-width: 1200px; margin: 0 auto;">
        <!-- Age-Appropriate Header with Contrast Panel -->
        <div style="background: rgba(0, 0, 0, 0.75); padding: 2rem; border-radius: 16px; margin-bottom: 2rem; backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.1);">
{% if user.tier_id <= 2 %}
    <div class="playful-header" style="color: white; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5); background: none; padding: 0; border: none;">
        <h2>ğŸŒŸ {{ user.username }}'s Learning Adventure! ğŸŒŸ</h2>
        <div class="mascot">ğŸ¦„</div>
    </div>
{% elif user.tier_id <= 4 %}
    <h2 style="color: white; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5); margin: 0;">ğŸ“Š {{ user.username }}'s Learning Dashboard</h2>
{% else %}
    <h2 style="color: white; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5); margin: 0;">ğŸ“ˆ Learning Analytics Dashboard</h2>
{% endif %}
        </div>

<!-- Profile and Progress Section -->
<div class="dashboard-grid">
    <div class="dashboard-card profile-card">
        {% if user.tier_id <= 2 %}
            <h3>ğŸ­ About You</h3>
            <div class="profile-avatar">
                {% if user.age <= 3 %}ğŸ§¸{% elif user.age <= 4 %}ğŸ»{% else %}ğŸ¦‹{% endif %}
            </div>
        {% elif user.tier_id <= 4 %}
            <h3>ğŸ‘¤ Your Profile</h3>
        {% else %}
            <h3>ğŸ“‹ User Profile</h3>
        {% endif %}
        
        <div class="profile-info">
            <p><strong>Name:</strong> {{ user.username }}</p>
            <p><strong>Age:</strong> {{ user.age }} years old</p>
            <p><strong>Learning Tier:</strong> 
                <span class="tier-badge">
                    {% if user.tier_id <= 2 %}ğŸŒˆ {{ user.age_tier.name if user.age_tier else 'Little Learner' }}
                    {% elif user.tier_id <= 4 %}â­ {{ user.age_tier.name if user.age_tier else 'Student' }}
                    {% else %}ğŸ“ {{ user.age_tier.name if user.age_tier else 'Professional' }}
                    {% endif %}
                </span>
            </p>
            {% if user.age_tier %}
                <p class="tier-description">{{ user.age_tier.description }}</p>
            {% endif %}
        </div>
    </div>
    
    <div class="dashboard-card progress-card">
        {% if user.tier_id <= 2 %}
            <h3>ğŸ† Your Amazing Progress!</h3>
        {% elif user.tier_id <= 4 %}
            <h3>ğŸ“ˆ Progress Overview</h3>
        {% else %}
            <h3>ğŸ“Š Learning Analytics</h3>
        {% endif %}
        
        <div class="progress-stats">
            {% if user.tier_id <= 2 %}
                <div class="big-number">{{ learned_words }}</div>
                <p>Words You Know!</p>
                <div class="progress-celebration">
                    {% for i in range(5 if learned_words >= 5 else learned_words) %}ğŸŒŸ{% endfor %}
                </div>
            {% else %}
                <p><strong>Words Mastered:</strong> {{ learned_words }} / {{ total_words }}</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ progress_percentage }}%;"></div>
                </div>
                <p class="progress-text">{{ progress_percentage }}% Complete</p>
            {% endif %}
        </div>
        
        {% if user.tier_id >= 5 %}
            <div class="detailed-stats">
                <!-- Professional tier gets detailed analytics -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">{{ progress_percentage }}%</div>
                        <div class="stat-label">Completion Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ learned_words }}</div>
                        <div class="stat-label">Words Mastered</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ total_words - learned_words }}</div>
                        <div class="stat-label">Remaining</div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<!-- Quick Actions Section -->
<div class="quick-actions">
    {% if user.tier_id <= 2 %}
        <h3>ğŸª Let's Play and Learn!</h3>
    {% elif user.tier_id <= 4 %}
        <h3>ğŸ¯ Quick Actions</h3>
    {% else %}
        <h3>ğŸ“‹ Learning Activities</h3>
    {% endif %}
    
    <div class="action-grid">
        <a href="{{ url_for('learning.practice') }}" class="action-btn practice-btn">
            {% if user.tier_id <= 2 %}
                <div class="action-icon">ğŸ®</div>
                <div class="action-title">Play & Learn!</div>
                <div class="action-desc">Fun games with words</div>
            {% elif user.tier_id <= 4 %}
                <div class="action-icon">ğŸ¯</div>
                <div class="action-title">Practice Session</div>
                <div class="action-desc">Interactive learning</div>
            {% else %}
                <div class="action-icon">ğŸ“</div>
                <div class="action-title">Practice Session</div>
                <div class="action-desc">Focused vocabulary training</div>
            {% endif %}
        </a>
        
        <a href="{{ url_for('learning.vocabulary') }}" class="action-btn vocabulary-btn">
            {% if user.tier_id <= 2 %}
                <div class="action-icon">ğŸ“–</div>
                <div class="action-title">Word Book</div>
                <div class="action-desc">See all your words</div>
            {% elif user.tier_id <= 4 %}
                <div class="action-icon">ğŸ“š</div>
                <div class="action-title">Vocabulary</div>
                <div class="action-desc">Browse and study words</div>
            {% else %}
                <div class="action-icon">ğŸ“Š</div>
                <div class="action-title">Vocabulary Bank</div>
                <div class="action-desc">Comprehensive word database</div>
            {% endif %}
        </a>
        
        <a href="{{ url_for('learning.achievements') }}" class="action-btn achievements-btn">
            {% if user.tier_id <= 2 %}
                <div class="action-icon">ğŸ†</div>
                <div class="action-title">My Prizes!</div>
                <div class="action-desc">See what you've won</div>
            {% elif user.tier_id <= 4 %}
                <div class="action-icon">ğŸ…</div>
                <div class="action-title">Achievements</div>
                <div class="action-desc">Unlock badges and rewards</div>
            {% else %}
                <div class="action-icon">ğŸ“ˆ</div>
                <div class="action-title">Performance</div>
                <div class="action-desc">Detailed progress analytics</div>
            {% endif %}
        </a>
    </div>
</div>

<div style="background: rgba(255, 243, 199, 0.9); padding: 15px; border-radius: 8px; margin: 20px 0; backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.2);">
    <h4>ğŸ’¡ Learning Tips for {{ user.age_tier.name if user.age_tier else 'Your' }} Tier:</h4>
    {% if user.age_tier %}
        {% if user.tier_id == 1 %}
            <p>Focus on simple words you see every day. Repeat them out loud and connect them to pictures!</p>
        {% elif user.tier_id == 2 %}
            <p>Try to use new words in sentences. Play word games and rhyming activities!</p>
        {% elif user.tier_id == 3 %}
            <p>Look for word patterns and families. Practice spelling and reading comprehension together.</p>
        {% elif user.tier_id == 4 %}
            <p>Connect new vocabulary to subjects you're studying. Try using academic terms in your own writing.</p>
        {% elif user.tier_id == 5 %}
            <p>Build your vocabulary for standardized tests and college preparation. Focus on etymology and word roots.</p>
        {% else %}
            <p>Set specific vocabulary goals for your career or interests. Use spaced repetition for long-term retention.</p>
        {% endif %}
    {% endif %}
    </div>
    </div>
</div>
{% endblock %}